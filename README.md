# Тестирование TCP-сервера и клиента

## Описание исходных файлов

Исходные файлы `server.py` и `client.py` реализуют простую систему TCP-взаимодействия "клиент-сервер":

1. **Сервер** принимает данные от клиентов порциями по 1КБ и возвращает их обратно (эхо-сервер).
2. **Клиент** устанавливает соединение с сервером, отправляет сообщение, введенное пользователем, и получает ответ от сервера.

## Подход к тестированию

В репозитории представлены два подхода к тестированию:

1. **Тестирование с использованием unittest** (`test_tcp_server_client.py`)
2. **Тестирование с использованием pytest** (`test_socket_server_client_pytest.py`)

Оба подхода выполняют аналогичные тесты, но с использованием разных тестовых фреймворков.

## Что тестируется

### Функции сервера
- Функция `do_something()`, которая обрабатывает данные от клиентов
- Обработка различных входных данных (обычный текст, пустые данные, специальные символы)

### Интеграционные тесты сервера
- Проверка эхо-функциональности сервера
- Обработка нескольких одновременных клиентов

### Функции клиента
- Подключение к серверу
- Отправка и получение данных
- Обработка пустых сообщений

## Особенности реализации тестов

Для тестирования используются:
- **Моки** (мок-сервер и мок-клиент) для изоляции компонентов
- **Потоки** (threading) для запуска сервера и клиентов в параллельных потоках
- **Перехват ввода/вывода** для тестирования консольных сообщений
- **Фикстуры** (в pytest) для подготовки тестового окружения

## Запуск тестов

### Запуск unittest
```bash
python -m unittest test_tcp_server_client.py
```

### Запуск pytest
```bash
pytest -v test_socket_server_client_pytest.py
```

## Пример вывода тестов

Успешно выполненные тесты должны дать вывод, подобный этому:

```
test_client_connection (__main__.TestTCPClientFunctions) ... ok
test_client_empty_message (__main__.TestTCPClientFunctions) ... ok
test_do_something (__main__.TestTCPServerFunctions) ... ok
test_server_echo (__main__.TestTCPServerIntegration) ... ok
test_server_multiple_clients (__main__.TestTCPServerIntegration) ... ok

----------------------------------------------------------------------
Ran 5 tests in X.XXXs

OK
```

## Что тестируется в функциях и методах

1. **Функция `do_something`**: Тестируется обработка обычных, пустых и специальных данных.
2. **Серверная обработка данных**: Тестируется корректность эхо-ответа и обработка нескольких клиентов.
3. **Клиентское взаимодействие**: Тестируется подключение, отправка/получение данных и корректность выводимых сообщений.

